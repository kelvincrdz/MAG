(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[706],{7820:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/player",function(){return r(5295)}])},5295:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var i=r(5893),n=r(9008),a=r.n(n),l=r(7294),s=r(1163);function c(){let e=(0,s.useRouter)(),t=(0,l.useRef)(null),r=(0,l.useRef)(null),n=(0,l.useRef)(null),c=(0,l.useRef)(null),o=(0,l.useRef)(null),f=(0,l.useRef)(null),u=(0,l.useRef)(null),d=(0,l.useRef)(null),x=(0,l.useRef)(null),m=(0,l.useRef)(null),h=(0,l.useRef)(null),p=(0,l.useRef)(null),j=(0,l.useRef)(null),g=(0,l.useRef)(null),[y,v]=(0,l.useState)(!1),[w,b]=(0,l.useState)(!1),[N,A]=(0,l.useState)("00:00"),[k,M]=(0,l.useState)("00:00");function E(){var e;null===(e=t.current)||void 0===e||e.click()}function L(){let e=r.current;e&&e.src&&(w?e.pause():e.play().catch(()=>alert("Erro ao reproduzir o arquivo.")))}function R(e){let t=r.current;if(!t||!t.duration)return;let i=c.current.getBoundingClientRect(),a=(e-i.left)/i.width;a=Math.max(0,Math.min(1,a)),t.currentTime=a*t.duration,n.current&&(n.current.style.width=100*a+"%"),A(P(t.currentTime)),_(100*a)}function S(){let e=r.current;e&&e.src&&(e.currentTime=Math.max(0,e.currentTime-10))}function T(){let e=r.current;e&&e.src&&e.duration&&(e.currentTime=Math.min(e.duration,e.currentTime+10))}function Z(){y&&v(!1)}(0,l.useEffect)(()=>{"true"!==localStorage.getItem("magPlayerLogado")&&e.replace("/")},[e]),(0,l.useEffect)(()=>{let e=r.current;if(!e)return;let t=()=>M(P(e.duration)),i=()=>{if(!y){let t=e.currentTime/e.duration*100;n.current&&(n.current.style.width=t+"%"),A(P(e.currentTime)),_(t)}},a=()=>{b(!1),n.current&&(n.current.style.width="0%"),e.currentTime=0,_(0)},l=()=>b(!0),s=()=>b(!1);return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",i),e.addEventListener("ended",a),e.addEventListener("play",l),e.addEventListener("pause",s),()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",i),e.removeEventListener("ended",a),e.removeEventListener("play",l),e.removeEventListener("pause",s)}},[y]),(0,l.useEffect)(()=>{o.current&&(w?o.current.classList.add("playing"):o.current.classList.remove("playing"))},[w]),(0,l.useEffect)(()=>{function e(e){e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||("Space"===e.code?(e.preventDefault(),L()):"ArrowLeft"===e.key?(e.preventDefault(),S()):"ArrowRight"===e.key?(e.preventDefault(),T()):"o"===e.key.toLowerCase()&&(e.preventDefault(),E()))}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w]);let C={tape1:{max:{main:160,r1:140,r2:120,r3:100},min:{main:85,r1:65,r2:45,r3:25}},tape2:{max:{main:160,r1:140,r2:120,r3:100},min:{main:85,r1:65,r2:45,r3:25}}};function _(e){if(null==e)return;let t=1-e/100,r=e/100;f.current&&f.current.setAttribute("r",(C.tape1.min.main+(C.tape1.max.main-C.tape1.min.main)*t).toString()),u.current&&u.current.setAttribute("r",(C.tape1.min.r1+(C.tape1.max.r1-C.tape1.min.r1)*t).toString()),d.current&&d.current.setAttribute("r",(C.tape1.min.r2+(C.tape1.max.r2-C.tape1.min.r2)*t).toString()),x.current&&x.current.setAttribute("r",(C.tape1.min.r3+(C.tape1.max.r3-C.tape1.min.r3)*t).toString()),m.current&&m.current.setAttribute("r",(C.tape2.min.main+(C.tape2.max.main-C.tape2.min.main)*r).toString()),h.current&&h.current.setAttribute("r",(C.tape2.min.r1+(C.tape2.max.r1-C.tape2.min.r1)*r).toString()),p.current&&p.current.setAttribute("r",(C.tape2.min.r2+(C.tape2.max.r2-C.tape2.min.r2)*r).toString()),j.current&&j.current.setAttribute("r",(C.tape2.min.r3+(C.tape2.max.r3-C.tape2.min.r3)*r).toString())}function P(e){return!e||Number.isNaN(e)?"00:00":"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat(Math.floor(e%60).toString().padStart(2,"0"))}return(0,i.jsxs)("div",{className:"player-container",children:[(0,i.jsx)(a(),{children:(0,i.jsx)("title",{children:"MAG Player - Reprodutor"})}),(0,i.jsxs)("div",{className:"cassette-player",ref:o,children:[(0,i.jsx)("div",{className:"cassette-container",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 810 513.5",className:"cassette-svg",children:[(0,i.jsx)("defs",{children:(0,i.jsxs)("filter",{id:"subtleBlueGlow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0.1 0.1 0.3 0 0.05  0.1 0.2 0.4 0 0.1   0.2 0.3 0.6 0 0.15  0   0   0   1 0",result:"blueish"}),(0,i.jsx)("feGaussianBlur",{in:"blueish",stdDeviation:"1.5",result:"blur"}),(0,i.jsxs)("feMerge",{children:[(0,i.jsx)("feMergeNode",{in:"blur"}),(0,i.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),(0,i.jsxs)("g",{id:"Tape",children:[(0,i.jsxs)("g",{id:"Tape1",children:[(0,i.jsxs)("g",{id:"TapeReel",children:[(0,i.jsx)("circle",{cx:"234",cy:"234",r:"160",fill:"#1a1a1a",className:"tape-reel tape1-main",ref:f}),(0,i.jsx)("circle",{cx:"234",cy:"234",r:"140",stroke:"#333",fill:"none",className:"tape-reel tape1-ring1",ref:u}),(0,i.jsx)("circle",{cx:"234",cy:"234",r:"120",stroke:"#333",fill:"none",className:"tape-reel tape1-ring2",ref:d}),(0,i.jsx)("circle",{cx:"234",cy:"234",r:"100",stroke:"#333",fill:"none",className:"tape-reel tape1-ring3",ref:x})]}),(0,i.jsx)("circle",{cx:"234",cy:"234",r:"86.05",fill:"#f2f2f2"}),(0,i.jsx)("circle",{cx:"234",cy:"234",r:"40.49",fill:"#bfbfbf"}),(0,i.jsx)("rect",{x:"246.52",y:"198.18",width:"10.12",height:"10.12",transform:"translate(133.98 -98.04) rotate(29.74)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"211.36",y:"259.7",width:"10.12",height:"10.12",transform:"translate(159.87 -72.49) rotate(29.74)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"264.37",y:"228.74",width:"10.12",height:"10.12",transform:"translate(501.7 -36.95) rotate(89.68)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"193.51",y:"229.14",width:"10.12",height:"10.12",transform:"translate(431.64 34.31) rotate(89.68)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"210.95",y:"198.41",width:"10.12",height:"10.12",transform:"translate(-73.39 137.84) rotate(-30.51)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"246.93",y:"259.46",width:"10.12",height:"10.12",transform:"translate(-99.41 164.56) rotate(-30.51)",fill:"#f2f2f2"}),(0,i.jsx)("circle",{cx:"234",cy:"234",r:"24.18",fill:"#1a1a1a"}),(0,i.jsx)("polygon",{points:"234 198.38 203.15 251.81 264.85 251.81 234 198.38",fill:"#1a1a1a"}),(0,i.jsx)("line",{x1:"234",y1:"198.38",x2:"234",y2:"234",fill:"none",stroke:"#f2f2f2",strokeMiterlimit:"10"}),(0,i.jsx)("line",{x1:"203.15",y1:"251.81",x2:"234",y2:"234",fill:"none",stroke:"#f2f2f2",strokeMiterlimit:"10"}),(0,i.jsx)("line",{x1:"264.85",y1:"251.81",x2:"234",y2:"234",fill:"none",stroke:"#f2f2f2",strokeMiterlimit:"10"})]}),(0,i.jsxs)("g",{id:"Tape2",children:[(0,i.jsxs)("g",{id:"TapeReel2",children:[(0,i.jsx)("circle",{cx:"576",cy:"234",r:"85",fill:"#1a1a1a",className:"tape-reel tape2-main",ref:m}),(0,i.jsx)("circle",{cx:"576",cy:"234",r:"65",stroke:"#333",fill:"none",className:"tape-reel tape2-ring1",ref:h}),(0,i.jsx)("circle",{cx:"576",cy:"234",r:"45",stroke:"#333",fill:"none",className:"tape-reel tape2-ring2",ref:p}),(0,i.jsx)("circle",{cx:"576",cy:"234",r:"25",stroke:"#333",fill:"none",className:"tape-reel tape2-ring3",ref:j})]}),(0,i.jsx)("circle",{cx:"576",cy:"234",r:"86.05",fill:"#f2f2f2"}),(0,i.jsx)("circle",{cx:"576",cy:"234",r:"40.49",fill:"#bfbfbf"}),(0,i.jsx)("rect",{x:"588.52",y:"198.18",width:"10.12",height:"10.12",transform:"translate(179.04 -267.72) rotate(29.74)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"553.36",y:"259.7",width:"10.12",height:"10.12",transform:"translate(204.94 -242.17) rotate(29.74)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"606.37",y:"228.74",width:"10.12",height:"10.12",transform:"translate(841.77 -378.94) rotate(89.68)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"535.51",y:"229.14",width:"10.12",height:"10.12",transform:"translate(771.71 -307.68) rotate(89.68)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"552.95",y:"198.41",width:"10.12",height:"10.12",transform:"translate(-26.04 311.47) rotate(-30.51)",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"588.93",y:"259.46",width:"10.12",height:"10.12",transform:"translate(-52.05 338.19) rotate(-30.51)",fill:"#f2f2f2"}),(0,i.jsx)("circle",{cx:"576",cy:"234",r:"24.18",fill:"#1a1a1a"}),(0,i.jsx)("polygon",{points:"576 198.38 545.15 251.81 606.85 251.81 576 198.38",fill:"#1a1a1a"}),(0,i.jsx)("line",{x1:"576",y1:"198.38",x2:"576",y2:"234",fill:"none",stroke:"#f2f2f2",strokeMiterlimit:"10"}),(0,i.jsx)("line",{x1:"545.15",y1:"251.81",x2:"576",y2:"234",fill:"none",stroke:"#f2f2f2",strokeMiterlimit:"10"}),(0,i.jsx)("line",{x1:"606.85",y1:"251.81",x2:"576",y2:"234",fill:"none",stroke:"#f2f2f2",strokeMiterlimit:"10"})]})]}),(0,i.jsxs)("g",{id:"Cassette",children:[(0,i.jsx)("path",{d:"M780.41,0H29.59A20.59,20.59,0,0,0,9,20.59V483.41A20.59,20.59,0,0,0,29.59,504H780.41A20.59,20.59,0,0,0,801,483.41V20.59A20.59,20.59,0,0,0,780.41,0ZM297,189H513v90H297ZM220.5,486A13.5,13.5,0,1,1,234,472.5,13.49,13.49,0,0,1,220.5,486ZM234,279a45,45,0,1,1,45-45A45,45,0,0,1,234,279Zm58.5,198A13.5,13.5,0,1,1,306,463.5,13.49,13.49,0,0,1,292.5,477Zm225,0A13.5,13.5,0,1,1,531,463.5,13.49,13.49,0,0,1,517.5,477Zm72,9A13.5,13.5,0,1,1,603,472.5,13.49,13.49,0,0,1,589.5,486ZM576,279a45,45,0,1,1,45-45A45,45,0,0,1,576,279Z",fill:"#2a2e32",filter:"url(#subtleBlueGlow)"}),(0,i.jsx)("path",{d:"M654.47,501.21,631.65,394.7a9.74,9.74,0,0,0-9.53-7.7H187.88a9.74,9.74,0,0,0-9.53,7.7L155.53,501.21A9.74,9.74,0,0,0,165.06,513H644.94A9.74,9.74,0,0,0,654.47,501.21ZM220.5,486A13.5,13.5,0,1,1,234,472.5,13.49,13.49,0,0,1,220.5,486Zm72-9A13.5,13.5,0,1,1,306,463.5,13.49,13.49,0,0,1,292.5,477Zm225,0A13.5,13.5,0,1,1,531,463.5,13.49,13.49,0,0,1,517.5,477Zm72,9A13.5,13.5,0,1,1,603,472.5,13.49,13.49,0,0,1,589.5,486Z",fill:"#2a2e32",stroke:"#c5d1d6",strokeMiterlimit:"10",filter:"url(#subtleBlueGlow)"}),(0,i.jsx)("rect",{x:"297",y:"189",width:"216",height:"90",fill:"#2a2e32",opacity:"0.67"}),(0,i.jsx)("rect",{y:"288",width:"18",height:"144",rx:"3.98",fill:"#2a2e32"}),(0,i.jsx)("rect",{x:"792",y:"288",width:"18",height:"144",rx:"3.98",fill:"#2a2e32"})]}),(0,i.jsxs)("g",{id:"Label",children:[(0,i.jsx)("path",{d:"M45,36V369H765V36ZM648,297H162V171H648Z",fill:"#bfbfbf"}),(0,i.jsx)("rect",{x:"45",y:"36",width:"720",height:"27",fill:"#ec1d25"}),(0,i.jsx)("rect",{x:"45",y:"63",width:"720",height:"81",fill:"#f2f2f2"}),(0,i.jsx)("rect",{x:"45",y:"315",width:"720",height:"54",fill:"#1a1a1a"}),(0,i.jsx)("text",{x:"405",y:"55",textAnchor:"middle",fill:"white",fontFamily:"Arial, sans-serif",fontSize:"18",fontWeight:"bold",children:"MAG PLAYER"}),(0,i.jsx)("text",{x:"405",y:"110",textAnchor:"middle",fill:"#333",fontFamily:"Arial, sans-serif",fontSize:"12",id:"songTitle",ref:g,children:"Selecione um arquivo .mag"}),(0,i.jsx)("text",{x:"405",y:"125",textAnchor:"middle",fill:"#666",fontFamily:"Arial, sans-serif",fontSize:"10",id:"songInfo",children:"Reprodutor de Audio Digital"})]})]})}),(0,i.jsxs)("div",{className:"controls-panel",children:[(0,i.jsx)("input",{type:"file",ref:t,id:"fileInput",accept:".mag",style:{display:"none"},onChange:function(e){var t,i;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(!a.name.toLowerCase().endsWith(".mag")){alert("Por favor, selecione um arquivo .mag");return}let l=URL.createObjectURL(a),s=r.current;s&&(s.src=l,s.load(),g.current&&(g.current.textContent=a.name),n.current&&(n.current.style.width="0%"),A("00:00"),M("00:00"),b(!1),null===(i=o.current)||void 0===i||i.classList.remove("playing"),_(0))}}),(0,i.jsxs)("div",{className:"main-controls",children:[(0,i.jsx)("button",{className:"minimal-btn open-btn",title:"Abrir arquivo",onClick:E,children:(0,i.jsx)("i",{className:"fas fa-folder-open"})}),(0,i.jsx)("button",{className:"minimal-btn rewind-btn",title:"Retroceder 10s",onClick:S,children:(0,i.jsx)("i",{className:"fas fa-backward-step"})}),(0,i.jsx)("button",{className:"minimal-btn play-btn ".concat(w?"pause":""),title:"Play/Pause",onClick:L,children:(0,i.jsx)("i",{className:"fas ".concat(w?"fa-pause":"fa-play")})}),(0,i.jsx)("button",{className:"minimal-btn forward-btn",title:"Avan\xe7ar 10s",onClick:T,children:(0,i.jsx)("i",{className:"fas fa-forward-step"})})]}),(0,i.jsx)("div",{className:"progress-section",children:(0,i.jsxs)("div",{className:"time-display",children:[(0,i.jsx)("span",{id:"currentTime",children:N}),(0,i.jsx)("div",{className:"progress-container",children:(0,i.jsx)("div",{className:"progress-bar",ref:c,onMouseDown:function(e){v(!0),R(e.clientX)},onMouseMove:function(e){y&&R(e.clientX)},onMouseUp:Z,onMouseLeave:Z,onTouchStart:function(e){v(!0),R(e.touches[0].clientX)},onTouchMove:function(e){y&&R(e.touches[0].clientX)},onTouchEnd:function(){v(!1)},children:(0,i.jsx)("div",{id:"progress",className:"progress-fill",ref:n})})}),(0,i.jsx)("span",{id:"duration",children:k})]})}),(0,i.jsx)("div",{className:"bottom-controls",children:(0,i.jsx)("button",{className:"minimal-btn logout-btn",title:"Sair",onClick:()=>{localStorage.removeItem("magPlayerLogado"),e.push("/")},children:(0,i.jsx)("i",{className:"fas fa-sign-out-alt"})})})]}),(0,i.jsx)("audio",{ref:r,preload:"none"})]})]})}},1163:function(e,t,r){e.exports=r(9090)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=7820)}),_N_E=e.O()}]);